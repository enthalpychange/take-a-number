{% extends 'datatables.html' %}

{% block content %}
<div class="container p-2">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Incidents</h5>
      <table id="incidents_table" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                <th>Number</th>
                <th>Subject</th>
                <th>Submitter</th>
                <th>Creation Date</th>
                <th>Owner</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
          {% for incident in incidents %}
            <tr>
                <td><a href="{% url 'tracker:incident-detail' incident.id %}" target="_blank">{{ incident.id }}</a></td>
                <td>{{ incident.name }}</td>
                <td>{{ incident.creator.userprofile.first_name }} {{ incident.creator.userprofile.last_name }}</td>
                <td>{{ incident.created | date:"Y-m-d H:i:s" }}</td>
                <td>{{ incident.owner.userprofile.first_name }} {{ incident.owner.userprofile.last_name }}</td>
                <td>{{ incident.get_status_display }}</td>
            </tr>
            {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock content %}

{% block javascript %}
{{ block.super }}
<script type='text/javascript'>
$(document).ready(function() {
  $('#incidents_table').DataTable();
});
</script>
{% endblock javascript %}